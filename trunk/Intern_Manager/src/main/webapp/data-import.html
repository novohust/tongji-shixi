
<!DOCTYPE html>
<html lang="en">
<head>
	
	<!-- start: Meta -->
	<meta charset="utf-8">
	<title>实习考勤管理系统</title>
	<meta name="author" content="Kruskal Liu">
	<!-- end: Meta -->
	
	<!-- start: Mobile Specific -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- end: Mobile Specific -->
	
	<!-- start: CSS -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap-classic.css" rel="stylesheet"><!-- theme from Charisma-->
	<!-- 取消responsive特性 -->
	<!--<link href="css/bootstrap-responsive.min.css" rel="stylesheet">-->
	<link href="css/style.css" rel="stylesheet">
	<!--<link href="css/style-responsive.css" rel="stylesheet">-->
	<!--<link href="css/retina.css" rel="stylesheet">-->
	<link href="css/app.css" rel="stylesheet">
	<!-- end: CSS -->
	

	<!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
	  	<script src="js/html5.js"></script>
		<link id="ie-style" href="css/ie.css" rel="stylesheet">
	<![endif]-->
	
	<!--[if IE 9]>
		<link id="ie9style" href="css/ie9.css" rel="stylesheet">
	<![endif]-->
	
	<!-- start: Favicon and Touch Icons -->
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
	<link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
	<link rel="shortcut icon" href="ico/favicon.png">
	<!-- end: Favicon and Touch Icons -->

	<style type="text/css">
	</style>
</head>

<body>
	<!-- start: Header -->
	<div class="navbar">
		<div class="navbar-inner">
			<div class="container-fluid">
				<a class="brand" href="index.html"><span>考勤管理系统</span></a>
								
				<!-- start: Header Menu -->
				<div class="nav-no-collapse header-nav">
					<ul class="nav pull-right">
						<!-- end: User Dropdown -->
						<li  rel="tooltip" title="退出登录">
							<a class="btn" href="#">
								<i class="halflings-icon white off"></i>
							</a>
						</li>
					</ul>
				</div>

				<div class=" pull-right" style="margin-top:10px;margin-right:10px;">
					<i class="halflings-icon white user" style="margin-top:3px;"></i>&nbsp;欢迎回来，admin
				</div>
				<!-- end: Header Menu -->
				
			</div>
		</div>
	</div>
	<!-- end: Header -->
	
	<div class="container-fluid">
		<div class="row-fluid">
				
			<!-- start: Main Menu -->
			<div id="sidebar-left" class="span1">
				<div class="nav-collapse sidebar-nav">
					<ul class="nav nav-tabs nav-stacked main-menu">
						<li><a href="intern-add.html"><i class="fa-icon-barcode"></i><span class="hidden-tablet"> 考勤录入</span></a></li>	
						<li><a href="intern-query.html"><i class="fa-icon-search"></i><span class="hidden-tablet"> 考勤查询</span></a></li>
						<li><a href="barcode-print.html"><i class="fa-icon-print"></i><span class="hidden-tablet"> 条码打印</span></a></li>
						<li><a href="data-import.html"><i class="fa-icon-signin"></i><span class="hidden-tablet"> 数据导入</span></a></li>
						<li><a href="data-manage.html"><i class="fa-icon-align-justify"></i><span class="hidden-tablet"> 数据管理</span></a></li>
					</ul>
				</div>
			</div>
			<!-- end: Main Menu -->
			
			<!-- start: Content -->
			<div id="content" class="span11" style="border-top-left-radius:0;">
				<form action="" class="form-horizontal">
					<fieldset>
						<div class="control-group">
							<label for="" class="control-label">选择文件</label>
							<div class="controls">
								<input type="file">
							</div>
						</div>

						<div class="control-group">
							<label for="" class="control-label">数据类型</label>
							<div class="controls">
								<select name="" id="" class="input-mini" rel="uniform">
									<option value="1">科室</option>
									<option value="2">病区</option>
									<option value="3">教授组</option>
									<option value="4">老师</option>
									<option value="5">学生</option>
								</select>	
							</div>
						</div>


						<div class="form-actions center-form-action"  style="text-align:left;">
							<button class="btn btn-primary" type="submit">确定</button>
						  </div>
					</fieldset>
				</form>

				<div></div>
			</div>
			<!-- end: Content -->
		
		<div class="alert alert-error no-record-error hide">
			<button data-dismiss="alert" class="close" type="button">×</button>
			尚未添加考勤记录！
		</div>	
			
		<div class="modal hide fade" id="myModal">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">x</button>
				<h3>警告</h3>
			</div>
			<div class="modal-body">
				<p>当前考勤记录：</p>
				<table class="table table-bordered table-striped">
					  <thead>
						  <tr>
							  <th>姓名</th>
							  <th>学号</th>
							  <th>实习月份</th>
							  <th>实习时间</th>                                     
						  </tr>
					  </thead>   
					  <tbody>
						<tr>
							<td>Muhammad Usman</td>
							<td class="center">M20127512</td>
							<td class="center">2013-02</td>
							<td class="center">第1周</td>                                       
						</tr>  
					  </tbody>
			 	</table>
			 	<p></p>
			 	<p>与下列已入库的记录冲突，<b>继续将删除下列记录</b>，是否继续？</p>
				<table class="table table-bordered table-striped">
					  <thead>
						  <tr>
							  <th>姓名</th>
							  <th>学号</th>
							  <th>实习月份</th>
							  <th>实习时间</th>                                     
						  </tr>
					  </thead>   
					  <tbody>
						<tr>
							<td>Muhammad Usman</td>
							<td class="center">M20127512</td>
							<td class="center">2013-02</td>
							<td class="center">第1周</td>                                       
						</tr>  
						<tr>
							<td>Muhammad Usman</td>
							<td class="center">M20127512</td>
							<td class="center">2013-02</td>
							<td class="center">第1周</td>                                       
						</tr> 
						<tr>
							<td>Muhammad Usman</td>
							<td class="center">M20127512</td>
							<td class="center">2013-02</td>
							<td class="center">第1周</td>                                       
						</tr> 
						<tr>
							<td>Muhammad Usman</td>
							<td class="center">M20127512</td>
							<td class="center">2013-02</td>
							<td class="center">第1周</td>                                       
						</tr> 
					  </tbody>
			 	</table>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal">取消</a>
				<a href="#" class="btn btn-primary">继续</a>
			</div>
		</div>
		
		<div class="clearfix"></div>
		
		<footer>
			<p>
				<span style="text-align:left;float:left">&copy; <a href="" target="_blank">华中科技大学同济医学院</a> 2013</span>
				<span class="hidden-phone" style="text-align:right;float:right">Powered by: <a target="_blank" href="http://kruskal.diandian.com">Kruskal</a></span>
			</p>
		</footer>
	</div>
	<!--/.fluid-container-->

	<!-- start: JavaScript-->
	<script src="js/jquery-1.9.1.min.js"></script>
	<script src="js/jquery-migrate-1.0.0.min.js"></script>
	<script src="js/jquery-ui-1.10.0.custom.min.js"></script>
	<script src="js/jquery.ui.touch-punch.js"></script>
	<script src="js/modernizr.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.cookie.js"></script>
	<script src='js/fullcalendar.min.js'></script>
	<script src='js/jquery.dataTables.min.js'></script>
	<script src="js/excanvas.js"></script>
	<script src="js/jquery.flot.js"></script>
	<script src="js/jquery.flot.pie.js"></script>
	<script src="js/jquery.flot.stack.js"></script>
	<script src="js/jquery.flot.resize.min.js"></script>
	<script src="js/gauge.min.js"></script>
	<script src="js/jquery.chosen.min.js"></script>
	<script src="js/jquery.uniform.min.js"></script>
	<script src="js/jquery.cleditor.min.js"></script>
	<script src="js/jquery.noty.js"></script>
	<script src="js/jquery.elfinder.min.js"></script>
	<script src="js/jquery.raty.min.js"></script>
	<script src="js/jquery.iphone.toggle.js"></script>
	<script src="js/jquery.uploadify-3.1.min.js"></script>
	<script src="js/jquery.gritter.min.js"></script>
	<script src="js/jquery.imagesloaded.js"></script>
	<script src="js/jquery.masonry.min.js"></script>
	<script src="js/jquery.knob.modified.js"></script>
	<script src="js/jquery.sparkline.min.js"></script>
	<script src="js/counter.js"></script>
	<script src="js/raphael.2.1.0.min.js"></script>
	<script src="js/justgage.1.0.1.min.js"></script>
	<script src="js/retina.js"></script>
	<script src="js/core.min.js"></script>
	<script src="js/charts.js"></script>
	<!-- end: JavaScript-->
	<script src="js/app.js"></script>

	<script type="text/javascript">

		$(function(){
			$('.intern-add-wrapper').live('click',function(e){
				$('.selected').removeClass('selected');
				$(this).addClass('selected');
			});

			//添加区块
			$('#add-area').click(function(){
				var lastArea = $('.intern-add-wrapper').last();
				var selectsInLastArea = lastArea.find('select');
				$.uniform.restore(selectsInLastArea);
				var area = lastArea.clone().hide().removeClass('selected');
				// header里元素的重置
				area.find('.box-header').find('.record-num').removeClass('label-success').addClass('label-important').html(0);
				area.find('.box-header').find('.btn-barcode').addClass('active');
				area.find('.box-header').find('.btn-input').removeClass('active');
				area.find('.box-header').find('.btn-minimize i').removeClass('chevron-up').addClass('chevron-down');
				// content的元素重置
				area.find('.box-content,.intern-table,.input-record-wrapper').hide();
				area.find('.box-content .intern-table tbody tr').remove();
				// 拷贝下拉框的值
				var selectsInArea = area.find('select');
				selectsInArea.each(function(i){
					$(this).find('option[value="'+$(selectsInLastArea.get(i)).val()+'"]').attr('selected',true);
				});
				console.log(lastArea.height());
				area.insertBefore($('.center-form-action')).slideToggle(function(){selectsInArea.uniform();});
				selectsInLastArea.uniform();
				$('.box-header .btn-close').fadeIn();
			});

			//考勤记录表格
			$(".intern-table i.remove-tr").live('click',function(e){
				$(e.target).closest('.intern-add-wrapper').trigger('click');
				// 删除最后一行时隐藏表单，如果手动添加的表单也是隐藏的，则收缩box
				if($(e.target).closest('tbody').find('tr').length==1){
					$(e.target).closest('table').hide();
					$(e.target).closest('.intern-add-wrapper').find('.box-header .record-num').html(0).removeClass('label-success').addClass('label-important');
					if(!$(e.target).closest('.box-content').find('.input-record-wrapper').is(':visible'))
						$(e.target).closest('.intern-add-wrapper').find('.box-header .btn-minimize').click();
					$(e.target).closest('tr').remove();
				}else{
					var ele = $(e.target).closest('.intern-add-wrapper').find('.box-header .record-num');
					ele.html(ele.html() - 1);
					$(e.target).closest('tr').remove();
				}
			});

			// 输入方式切换
			$('.box-icon .btn-group .btn-barcode').live('click',function(e){
				var wrapper = $(e.target).closest('.intern-add-wrapper');
				// 切换到条码扫描时，如果考勤记录表为空且box是展开状态则全部收起
				if(!wrapper.find('.intern-table').is(':visible') && wrapper.find('.box-header .btn-minimize i').is('.chevron-up'))
					wrapper.find('.box-header .btn-minimize').click();
				wrapper.find('.input-record-wrapper').slideUp();
			});
			$('.box-icon .btn-group .btn-input').live('click',function(e){
				var wrapper = $(e.target).closest('.intern-add-wrapper');
				// 切换到手动输入时，如果box是收缩状态则把它展开
				if(!wrapper.find('.box-content').is(":visible")){
					$(e.target).closest('.intern-add-wrapper').find('.input-record-wrapper').show();
					wrapper.find('.box-header .btn-minimize').click();
				}else{
					$(e.target).closest('.intern-add-wrapper').find('.input-record-wrapper').slideDown();
				}
			});

			// 手动输入记录表格
			$('.input-record-wrapper .form-actions .switch-to-barcode').live('click',function(e){
				e.preventDefault();
				$(e.target).closest('.intern-add-wrapper').find('.box-header .btn-barcode').click();
			});

			// 演示相关
			
			$('#showcase-validate').click(function(){
				$(".intern-add-wrapper").each(function(){
					if($(this).find('.record-num').html() == 0 && $(this).not('shake')){
						$(this).addClass('shake');
						setTimeout($.proxy(function(){this.removeClass('shake')},$(this)),1000);
					}
				});
			});
			$('#showcase-repeatwithcur').click(function(){
				$('.intern-table tbody tr.alert').removeClass("alert");
				var tr = $(".intern-table tbody tr").last();
				tr.addClass('alert');
				var btn = tr.closest('.intern-add-wrapper').find('.box-header .btn-minimize');
				btn.find('i').is('.chevron-down')?btn.click():null;
			});
			$('#showcase-repeatwithdb').click(function(){
				$('#myModal').modal();
			});
		});
	</script>
</body>
</html>
